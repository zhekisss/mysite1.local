function onScroll(){var e=win.scrollTop();return lastScrollTop>e?(infoWindow.text("up"),res="true"):lastScrollTop<e&&(infoWindow.text("down"),res="false"),lastScrollTop=e,res}function callBackFunction(){0!=bn&&5!=bn&&section.eq(bn).append("\n<h1>Блок №"+bn+"</h1>"),flag=!1}function scroll(e,n){console.log("xz = "+xz++),$("html").animate({scrollTop:e},n,"easeInOutCubic",callBackFunction)}function nextSlide(){$(".carousel").carousel("next")}function getDelta(e){var n=e||window.event;return n=n.originalEvent?n.originalEvent:n,delta=n.detail?-40*n.detail:n.wheelDelta}function parallax(e,n,t,o){var l=$(window).scrollTop()*n;t*=n,e.css("background-position","0 "+(l-t+o)+"px")}var header=$("header"),begin=$(".begin"),s1OffsetTop=$("#s1").offset().top,winHeight=(win=$(window)).height(),docHeight=$(document).height(),logo=$("#logo-container"),lastScrollTop=0,menuNav=$("nav a"),infoWindow=$("#infoWindow"),res="null",section=$(".section"),sectionHeight=section.height(),win=$(window),nav=$("body nav"),ths=$(this),elementOffset=[],footerHeight=$("#footer").height(),scrollDuration=1500,count=0,flag=!1,bn=0,blockNum=0,cnt=(section=$(".section")).length,mousewheelevt=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",xz=0,materialIcons=$(".material-icons"),navLi=document.querySelectorAll("nav ul li a");navLi.forEach(function(e,n){n+=1,e.innerHTML+=" "+n}),setInterval(function(){$(".loader").fadeOut(100)},5e3),menuNav.on("click",function(e){e.preventDefault();var n=$(this).attr("href");scroll($(n).offset().top,scrollDuration,e.type)}),section.each(function(e,n){elementOffset[e]=$(n).offset().top}),win.on("scroll",function(e){if(console.log(bn),section.each(function(e){var n=section[e].offsetTop;parallax($(this),.6,n,winHeight)}),parallax(header,.6,0,0),ths.scrollTop()>s1OffsetTop-100?nav.css("top","0"):nav.css("top","-100px"),blockNum=bn,win.scrollTop()+winHeight>docHeight-footerHeight)bn=elementOffset.length-1;else for(i=0;i<elementOffset.length;i++)win.scrollTop()+sectionHeight/2>elementOffset[i]&&win.scrollTop()+sectionHeight/2<=elementOffset[i+1]&&(bn=i)}),logo.on("click",function(e){e.preventDefault(),scroll(0,scrollDuration,e.type)}),begin.on("click",function(e){e.preventDefault(),scroll(s1OffsetTop,scrollDuration,e.type)}),$(".carousel.carousel-slider").carousel({fullWidth:!0,duration:1e3,indicators:!0});var duration=7e3,nextSlideInterval=setInterval(nextSlide,duration);$(".carousel").on("mouseenter",function(){clearInterval(nextSlideInterval)}),$(".carousel").on("mouseleave",function(){nextSlideInterval=setInterval(nextSlide,duration)}),$(document).on(mousewheelevt+".my_wheel",function(e){if(console.log("Счетчик = "+count),e.preventDefault(),flag)return!1;if(getDelta(e)>0){if(blockNum<=0)return!1;--blockNum}else{if(blockNum>=cnt-1)return!1;++blockNum}count++,flag=!0,scroll(section.eq(blockNum).offset().top,scrollDuration)}),$("#layerslider").layerSlider({autoStart:!1,firstLayer:2,skin:"borderlesslight",skinsPath:"/static/layerslider/skins/"});